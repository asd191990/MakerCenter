{% extends 'FrontEnd/base/base.html' %}

{% block import %}

{% load static%}
<link rel="stylesheet" href="{% static 'css/space_intro/space_intro.css' %}">
<script src="{% static 'js/vue.js' %}"> </script>
<script src="{% static 'js/axios.min.js' %}"> </script>
{% endblock %}

{% block main %}

<section class="container-1" id="app">
    <div class="title-1">空間介紹</div>

    <input class="searchbox" type="text" v-model="search" placeholder="Search ..." />


    <!-- <table cellpadding="10" ; style="width: 100%; " border=" 1px solid; border-collapse:collapse;" class="tablestyle"> -->
    <table class="tablestyle" cellpadding="18" style="word-break:break-all;">
        <thead>
            <tr class="bg-danger" style="height: 80px; ">
                <th style="width: 10%; padding:25px">教室代碼</th>
                <th style="width: 18%; padding-left: 25px;">教室名稱</th>
                <th style="width: 42%; padding-left: 25px;">空間介紹</th>
                <th style="width: 8%; padding-left: 15px;">容納人數</th>
                <th style="width: 22%; padding-left: 25px;">設備資訊</th>
            </tr>
        </thead>
        <tbody style="height: auto;">
            <tr style="height: 280px; line-height: 32px;" v-for="item in ListSearch">
                <td style="text-align: center;">${item.code}</td>
                <td style="padding-left: 20px; padding-right: 20px; text-align: justify;">${item.name}</td>
                <td style="padding-left: 20px; padding-right: 20px; text-align: justify;">
                    ${item.space_description}</td>
                <td style="text-align: center;">${item.number}</td>
                <td style="padding-left: 20px; padding-right: 20px; text-align: justify;">
                    ${item.equipment_description}</td>
            </tr>
        </tbody>
    </table>


</section>


<script>

    axios.defaults.xsrfCookieName = 'csrftoken';
    axios.defaults.xsrfHeaderName = 'X-CSRFToken';
    let downloadVue = new Vue({
        el: '#app',
        delimiters: ['${', '}'],
        data: {
            search: "",
            dataList: [],
        },
        mounted: function () {
            axios.post("{% url 'apigetdblist' 'Space' %}")
                .then((response) => {
                    let getdata = response.data;
                    console.log(getdata);
                    this.dataList = getdata;
                })
                .catch((error) => console.log(error));
        },
        methods: {
        }, computed: {
            ListSearch() {
                return this.dataList.filter(box => {
                    return box.name.includes(this.search);
                })
            }
        }


    })
</script>


{% endblock %}